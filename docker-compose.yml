# MoM Reborn Server - Docker Compose
# Runs all server components in a 32-bit container

version: '3.8'

services:
  momserver:
    build:
      context: .
      dockerfile: Dockerfile.32bit
    container_name: mom-server
    ports:
      - "2002:2002"     # MasterServer
      - "2003:2003"     # GMServer
      - "7000:7000"     # WorldDaemon
      - "7001:7001"     # WorldDaemon
      - "28000:28000"   # WorldServer (primary zone)
      - "8192:8192"     # Manhole (admin)
    volumes:
      - ./data:/server/data
      - ./logs:/server/logs
      - ./projects:/server/projects
      - ./serverconfig:/server/serverconfig
    networks:
      - mom-network
    restart: unless-stopped
    # Override entrypoint for debugging if needed:
    # command: /bin/bash -c "sleep infinity"

networks:
  mom-network:
    driver: bridge
